<%= render 'accounts/header' %>

<div class="container">
  <div class="row">
    <div class="col-12 col-lg-3">
      <%= render 'accounts/navigation' %>
    </div>
    <div class="col-12 col-lg-9">
      <h1 class="mb-4">Plan</h1>

      <% if @account.plan %>
        <h2 class="h6 fw-normal">Your current plan</h2>
        <div class="well p-3 mb-4 border-primary" style="border-width: 2px !important;">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <h3 class="h4"><%= @account.plan_name %></h3>
              <p class="small mb-2"><strong><%= number_with_delimiter(@account.plan_requests) %> requests</strong> per hour at <strong>$<%= @account.plan_price.to_i %></strong> per <%= @account.plan_billing_period %></p>
              <% if @account.next_payment_date %>
                <p class="small text-muted mb-0">Next payment due <strong><%= @account.next_payment_date.strftime('%b %d, %Y') %></strong></p>
              <% end %>
            </div>
            <span class="badge bg-primary">Current</span>
          </div>
        </div>
      <% else %>
        <div class="alert alert-info mb-4">
          <p class="mb-0">You don&apos;t have an active subscription. Choose a plan below to get started.</p>
        </div>
      <% end %>

      
      <div class="d-md-flex justify-content-between align-items-center  mt-5 mb-3">
            <h2 class="h5">Available plans</h2>
            <a href="/pricing" class="spesh-link">View plans and pricing</a>
          </div>
    
        <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3">
          <% @plans.each do |plan| %>
            <div class="col d-flex">
              <div class="w-100 h-100 border rounded-3 p-3 d-flex">
                <%= render 'pages/plan_card', plan: plan, show_usage: true %>
              </div>
            </div>
          <% end %>
        </div>
    
    </div>
  </div>
</div>
