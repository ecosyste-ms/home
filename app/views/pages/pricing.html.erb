<div class="breadcrumb-section py-3 mt-2">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Pricing</li>
      </ol>
    </nav>
  </div>
</div>

<div class="purple-grad-bg pt-4 pb-4 mb-5">
  <div class="container">
    <h1 class="display-1 extra-bold mb-3">API Plans and Pricing</h1>
    <p class="lead">Choose the plan that works for you</p>
  </div>
</div>

<div class="container mb-5">
  

  <!-- Comparison table (md+) -->
  <div class="row mt-5 d-none d-md-block">
    <div class="col-12">
      <div class="table-responsive table-rounded">
        <table class="table pricing-table align-middle">
          <caption class="visually-hidden">Compare plan features and limits</caption>
          <thead>
            <tr>
              <th scope="col" class="w-25"><span class="visually-hidden">Feature</span></th>
              <% @plans.each do |p| %>
                <th scope="col" class="pricing-table__th>
                  <%= render 'plan_card', plan: p %>
                </th>
              <% end %>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">API Access
                <a href="https://docs.ecosyste.ms/docs/usage/authentication" aria-labelledby="access-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'Explain API access methods'
                  %>
                  <span id="access-help" class="visually-hidden">Explain API access methods</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><%= p.access_type %></td><% } %>
            </tr>
            <tr>
              <th scope="row">Rate limit
                <a href="https://docs.ecosyste.ms/docs/usage/rate-limits" aria-labelledby="rate-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'What are rate limits?'
                  %>
                  <span id="rate-help" class="visually-hidden">What are rate limits?</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><%= p.formatted_requests %> requests per hour</td><% } %>
            </tr>
            <tr>
              <th scope="row">Request priority
                <a href="https://docs.ecosyste.ms/" aria-labelledby="request-priority-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'What is request priority?'
                  %>
                  <span id="request-priority-help" class="visually-hidden">What is request priority?</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><%= p.priority %></td><% } %>
            </tr>
            <tr>
              <th scope="row">License
              <a href="https://docs.ecosyste.ms/docs/usage/licences" aria-labelledby="license-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'What licences are available?'
                  %>
                  <span id="license-help" class="visually-hidden">What licences are available?</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><a href="#"><%= p.license_name %></a></td><% } %>
            </tr>
            <tr>
              <th scope="row">Support
                <a href="https://docs.ecosyste.ms/" aria-labelledby="support-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'Explain levels of support'
                  %>
                  <span id="support-help" class="visually-hidden">Explain levels of support</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><%= p.support_level %></td><% } %>
            </tr>
            <tr>
              <th scope="row">SLA
                <a href="https://docs.ecosyste.ms/" aria-labelledby="sla-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'Explain Service Level Agreements'
                  %>
                  <span id="sla-help" class="visually-hidden">Explain Service Level Agreements</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><%= p.sla_level %></td><% } %>
            </tr>
            <tr>
              <th scope="row">Dashboard access
                <a href="https://docs.ecosyste.ms/" aria-labelledby="dashboard-help" class="help-link">
                  <%= bootstrap_icon 'question-circle',
                  width: 18, height: 18, aria_hidden: 'true', focusable: 'false', role: 'img', class: 'mb-1', title: 'Explain dashboards'
                  %>
                  <span id="dashboard-help" class="visually-hidden">Explain dashboards</span>
                </a>
              </th>
              <% @plans.each { |p| %><td><%= p.dashboard_access ? 'Included' : 'No' %></td><% } %>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Mobile accordion (xsâ€“sm only) -->
<div class="row d-md-none mt-4">
  <div class="col-12">
    <div class="accordion pricing-accordion" id="planFeatures">
      <% @plans.each_with_index do |p, i| %>
        <div class="accordion-item p-3">
          <h2 class="accordion-header" id="head-<%= i %>">
            <!-- Card-as-header -->
            <button class="accordion-button card-toggle <%= i.zero? ? '' : 'collapsed' %>" 
                    type="button"
                    data-bs-toggle="collapse" 
                    data-bs-target="#body-<%= i %>"
                    aria-expanded="<%= i.zero? %>"
                    aria-controls="body-<%= i %>">
              <%= render 'plan_card', plan: p %>
            </button>
          </h2>

          <div id="body-<%= i %>" 
               class="accordion-collapse collapse <%= 'show' if i.zero? %>" 
               data-bs-parent="#planFeatures">
            <div class="accordion-body">
              <ul class="list-unstyled mb-0">

                <li class="mb-2">
                  <strong>API Access</strong>
                  <a href="#" aria-labelledby="m-access-help-<%= i %>" class="help-link ms-1 align-middle">
                    <%= bootstrap_icon 'question-circle', width: 18, height: 18, aria_hidden: 'true', focusable: 'false', class: 'mb-1', title: 'Explain API access methods' %>
                    <span id="m-access-help-<%= i %>" class="visually-hidden">Explain API access methods</span>
                  </a>
                  <div><%= p.access_type %></div>
                </li>

                <li class="mb-2">
                  <strong>Rate limit</strong>
                  <a href="#" aria-labelledby="m-rate-help-<%= i %>" class="help-link ms-1 align-middle">
                    <%= bootstrap_icon 'question-circle', width: 18, height: 18, aria_hidden: 'true', focusable: 'false', class: 'mb-1', title: 'What are rate limits?' %>
                    <span id="m-rate-help-<%= i %>" class="visually-hidden">What are rate limits?</span>
                  </a>
                  <div><%= p.formatted_requests %> requests per hour</div>
                </li>

                <li class="mb-2">
                  <strong>Request priority</strong>
                  <a href="#" aria-labelledby="m-priority-help-<%= i %>" class="help-link ms-1 align-middle">
                    <%= bootstrap_icon 'question-circle', width: 18, height: 18, aria_hidden: 'true', focusable: 'false', class: 'mb-1', title: 'Explain request priority' %>
                    <span id="m-priority-help-<%= i %>" class="visually-hidden">Explain request priority</span>
                  </a>
                  <div><%= p.priority %></div>
                </li>

                <li class="mb-2">
                  <strong>License</strong>
                  <div><a href="#"><%= p.license_name %></a></div>
                </li>

                <li class="mb-2">
                  <strong>Support</strong>
                  <a href="#" aria-labelledby="m-support-help-<%= i %>" class="help-link ms-1 align-middle">
                    <%= bootstrap_icon 'question-circle', width: 18, height: 18, aria_hidden: 'true', focusable: 'false', class: 'mb-1', title: 'Explain levels of support' %>
                    <span id="m-support-help-<%= i %>" class="visually-hidden">Explain levels of support</span>
                  </a>
                  <div><%= p.support_level %></div>
                </li>

                <li class="mb-2">
                  <strong>SLA</strong>
                  <a href="#" aria-labelledby="m-sla-help-<%= i %>" class="help-link ms-1 align-middle">
                    <%= bootstrap_icon 'question-circle', width: 18, height: 18, aria_hidden: 'true', focusable: 'false', class: 'mb-1', title: 'Explain service level agreements' %>
                    <span id="m-sla-help-<%= i %>" class="visually-hidden">Explain service level agreements</span>
                  </a>
                  <div><%= p.sla_level %></div>
                </li>

                <li class="mb-2">
                  <strong>Dashboard access</strong>
                  <a href="#" aria-labelledby="m-dashboard-help-<%= i %>" class="help-link ms-1 align-middle">
                    <%= bootstrap_icon 'question-circle', width: 18, height: 18, aria_hidden: 'true', focusable: 'false', class: 'mb-1', title: 'Explain dashboards' %>
                    <span id="m-dashboard-help-<%= i %>" class="visually-hidden">Explain dashboards</span>
                  </a>
                  <div><%= p.dashboard_access ? 'Included' : 'No' %></div>
                </li>

              </ul>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

  <div class="row mt-5">
    <div class="col-12 col-md-4 col-xl-3">
      <div class="py-5 px-3">
        <h2>Looking for something more?</h2>
        <p>We are happy to provide data exports, custom access, and direct support on a commercial basis. We also offer discounted access to academic institutions and charitable organisations. Just ask!</p>
        <p><a href="#" class="btn btn-primary rounded-pill">Talk to us</a></p>
      </div>
    </div>
    <div class="col-12 col-md-8 col-xl-9">
      <div class="well p-5">
        <h2 class="text-primary-dark">Commercial licensing</h2>
        <p>ecosyste.ms data is licensed using the Creative Commons Sharealike Attribution Licence. We offer less restrictive licences on request</p>
        <p><a href="#" class="btn btn-primary rounded-pill">Request a licence</a></p>
      </div>
    </div>
  </div>
</div>